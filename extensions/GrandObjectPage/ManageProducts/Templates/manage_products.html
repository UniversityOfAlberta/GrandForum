<div id="editDialog" style="display:none;"></div>
<div id="deletePrivateDialog" style="display:none;" title="Delete <%= productsTerm.pluralize() %>">
    <p>Are you sure you want to delete all "private" <%= productsTerm.pluralize().toLowerCase() %>?</p>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="deleteDialog" style="display:none;" title="Delete <%= productsTerm %>">
    <p>Are you sure you want to delete this <%= productsTerm.toLowerCase() %>?</p>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="doiDialog" style="display:none;" title="Add From DOI">
    <p>You can import a single publication from a DOI (Digital Object Identifier). If the "overwrite" option is selected, previously uploaded publications with the same title will be updated.</p>
    <b>DOI:</b> <input type="text" width="20" name="doi" placeholder="10.1000/182" />
    <br /><br /><input type="checkbox" id="doi_overwrite" name="overwrite" value="yes" style="vertical-align:middle;" /> <b>Overwrite existing <%= productsTerm.toLowerCase().pluralize() %>?</b>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="ccvDialog" style="display:none;" title="Upload Canadian CCV">
    <p>You can upload your Canadian CCV (in XML format) using the form below.  Any <%= productsTerm.toLowerCase() %> that can be read into the <%= siteName %> will automatically imported, but will not be visible to anyone else on the <%= siteName %> except you.  The <%= productsTerm.toLowerCase() %> will be placed in a separate "private" queue, and can be released to the rest of the <%= siteName %> by unchecking the "private" checkbox in the <%= productsTerm %> Management table.  This way any unwanted <%= productsTerm.pluralize().toLowerCase() %> will not get added to the <%= siteName %>, and also gives you a chance to make changes to the <%= productsTerm.toLowerCase() %> and associate it with projects before releasing it.  A <%= productsTerm.toLowerCase() %> will not get added twice into the <%= siteName %>, so uploading the CCV a second time will generally not result in duplicate entries.  If the "overwrite" option is selected, previously uploaded <%= productsTerm.toLowerCase().pluralize() %> will be updated, and if they were deleted they will be re-created.</p>
    <iframe name="fileUpload" style="display:none;"></iframe>
    <form target="fileUpload" action="<%= wgServer + wgScriptPath %>/index.php?action=api.uploadCCV" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="publications" value="true" />
        <input type="file" name="ccv" accept="application/xml" />
        <br /><br /><input type="checkbox" id="ccv_overwrite" name="overwrite" value="yes" style="vertical-align:middle;" /> <b>Overwrite existing <%= productsTerm.toLowerCase().pluralize() %>?</b>
    </form>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="calendarDialog" style="display:none;" title="Upload ICS Calendar">
    <p>You can upload a Calendar (in ICS format) using the form below.  Any events that can be read into the <%= siteName %> will automatically imported, but will not be visible to anyone else on the <%= siteName %> except you.  The <%= productsTerm.toLowerCase() %> will be placed in a separate "private" queue, and can be released to the rest of the <%= siteName %> by unchecking the "private" checkbox in the <%= productsTerm %> Management table.  This way any unwanted events will not get added to the <%= siteName %>, and also gives you a chance to make changes to the event and associate it with projects before releasing it.</p>
    <iframe name="icsUpload" style="display:none;"></iframe>
    <form target="icsUpload" action="<%= wgServer + wgScriptPath %>/index.php?action=api.uploadICS" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="publications" value="true" />
        <input type="file" name="ics" accept=".ics" />
    </form>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="bibtexDialog" style="display:none;" title="Import BibTeX">
    <p>You can import a list publications by pasting a list of BibTeX references in the textbox below. The imported publications will appear in the table below, marked as "private", and will not be reflected in the AR or QA CV. To release these private entries, after having reviewed that they were imported correctly (many publishers' bibtex entries are ill-formed) simply uncheck the "private" checkbox in the Output Management table. If the "overwrite" option is selected, previously uploaded publications with the same title will be updated.</p>
    <textarea style="resize: none; height:300px; font-size: 11px; font-family: monospace;" name="bibtex"></textarea>
    <br /><br /><input type="checkbox" id="bibtex_overwrite" name="overwrite" value="yes" style="vertical-align:middle;" /> <b>Overwrite existing <%= productsTerm.toLowerCase().pluralize() %>?</b>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="instructions" style="display:none;">
    <p>
        This page is used to manage all of your <%= productsTerm.pluralize().toLowerCase() %>.  <%= productsTerm.pluralize() %> will show up in this list if one of the following conditions is true.
        <ul>
            <li>You are listed as being one of the authors</li>
            <li>One of your HQP is listed as being one of the authors (only applicable to Supervisors)</li>
            <li>You were the person that created the <%= productsTerm.toLowerCase() %></li>
        </ul>
    </p>
    <p>
        If the authors cell of a <%= productsTerm.toLowerCase() %> is highlighted yellow, then it means that you (or one of your HQP) is not listed as an author of that <%= productsTerm.toLowerCase() %> and that it may need to be manually edited.
    </p>
    <p>
        If an entry's title is highlighted in orange, this indicate that the entry may be incomplete (for example, only contains title and the year)
    </p>
    <p>
        <%= productsTerm.pluralize() %> which are listed as being 'Private' will not show up anywhere else on the <%= siteName %> except for on this page.  To 'release' the <%= productsTerm.toLowerCase() %> to the rest of the <%= siteName %>, uncheck the 'Private' checkbox for a specific <%= productsTerm.toLowerCase() %>, or press the 'Release All Private' button to release all of them.  Once all of your changes are done, make sure to press the 'Save All' button.
    </p>
</div>
<p>
    <% if(this.category != null){ %>
        <button id="addProductButton">Add <%= this.category %></button>
    <% } else { %>
        <button id="addProductButton">Add <%= productsTerm %></button>
    <% } %>
    <button id="addFromDOIButton">Add From DOI</button>
    <!--button id="uploadCCVButton">Upload CCV</button-->
    <button id="importBibTexButton">Import BibTeX</button>
    <% if(productStructure.categories['Activity'] != undefined && 
          productStructure.categories['Activity'].types['Meeting'] != undefined){ %>
        <button id="uploadCalendarButton">Import ICS Calendar</button>
    <% } %>
    <% if(_.contains(allowedRoles, MANAGER)){ %>
        <span style="margin-left:30px;">
        <% if(!this.model.all){ %>
            <a class="button" href="#/all">Show All</a>
        <% } else { %>
            <a class="button" href="#">Show Only Mine</a>
        <% } %>
        </span>
    <% } %>
</p>
<%= subview('addProduct') %>
<table id="listTable" frame="box" rules="all" style="display:none;">
    <thead>
        <% if(projectsEnabled){ %>
            <tr style="border-bottom: 1px solid #C8C8C8; border-top: 1px solid #C8C8C8;">
                <th class="angledTableHead" ><div class="angledTableBorder"></div><div class="angledTableText">Other</div></th>
                <% _.each(this.projects.models, function(p){ %>
                    <th class="angledTableHead checkboxCell"><div class="angledTableBorder"></div><div class="angledTableText"><%= p.get('name') %></div></th>
                <% }) %>
                <th width="100%" colspan="7"><%= productsTerm %> Information</th>
            </tr>
        <% } %>
        <tr style="border-bottom: 2px solid #C8C8C8;">
            <% if(projectsEnabled){ %>
                <th width="40px"></th>
                <% _.each(this.projects.models, function(p){ %>
                    <th width="40px" class="checkboxCell"><input class="selectAll" data-project="<%= p.id %>" type="checkbox" /></th>
                <% }) %>
            <% } %>
            <th width="1%" style="border-left: 2px solid #C8C8C8;">Edit</th>
            <th width="1%">Private</th>
            <th width="3%" style="min-width: 70px;">Date</th>
            <th width="12%">Category</th>
            <th width="13%">Type</th>
            <th width="35%">Title</th>
            <th width="35%">Authors</th>
        </tr>
    </thead>
    <tbody id="productRows">
        
    </tbody>
</table>
