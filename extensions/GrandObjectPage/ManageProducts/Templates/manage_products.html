<div id="editDialog" style="display:none;"></div>
<div id="deletePrivateDialog" style="display:none;" title="Delete <%= productsTerm.pluralize() %>">
    <div class="ui-icon ui-icon-alert" style="float:left; margin:50px 12px 50px 0;"></div><p>Use <b>"Exclude"</b> to disassociate this output from your record. "Delete" will delete it for all the co-authors. Are you sure you want to delete all "private" <%= productsTerm.pluralize().toLowerCase() %>?</p>
    <input id="deleteCheck" type="checkbox" /> I have read and understand the implications of the above statement.
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="deleteDialog" style="display:none;" title="Delete <%= productsTerm %>">
    <div class="ui-icon ui-icon-alert" style="float:left; margin:50px 12px 50px 0;"></div><p>Use <b>"Exclude"</b> to disassociate this output from your record. "Delete" will delete it for all the co-authors. Are you sure you want to delete it?</p>
    <input id="deleteCheck" type="checkbox" /> I have read and understand the implications of the above statement.
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="doiDialog" style="display:none;" title="Add From DOI">
    <p>You can import a single publication from a DOI (Digital Object Identifier). If the "overwrite" option is selected, previously uploaded publications with the same title and type will be updated.  Overwriting will typically only add information, and not change existing fields that already have data.</p>
    <p><b>Note:</b> After importing, double check that the publications contain the correct data, especially authors.  If the author is known to the system, they will have a green background when editing, if they don't appear green, then you will need to manually correct this.</p>
    <b>DOI:</b> <input type="text" width="20" name="doi" placeholder="10.1000/182" />
    <br /><br /><b>Overwrite existing <%= productsTerm.toLowerCase().pluralize() %>?</b><br />
    <input type="radio" id="doi_overwrite" name="doi_overwrite" value="yes" style="vertical-align:middle;" /> Yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" id="doi_overwrite" name="doi_overwrite" value="" style="vertical-align:middle;" checked="checked" /> No
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="orcidDialog" style="display:none;" title="Import From ORCID">
    <p>Importing Publications from ORCID will import all works with a valid BibTeX citation.  After clicking the "Import" button, you will be asked to login to your ORCID account and allow the FOS Forum access to your account.  Once this has been done, your works will automatically get imported as Publications in the Forum.  If the "overwrite" option is selected, previously uploaded publications with the same title and type will be updated.  Overwriting will typically only add information, and not change existing fields that already have data.</p>
    <p><b>Note:</b> Please review carefully the data imported from ORCID, since there is a wide variance in the data quality across ORCID profiles.  After importing, double check that the publications contain the correct data, especially authors.  If the author is known to the system, they will have a green background when editing, if they don't appear green, then you will need to manually correct this.</p><br />
    <p><small>ORCID is an independent non-profit organization that provides a persistent identifier – an ORCID iD – that distinguishes you from other researchers and a mechanism for linking your research outputs and activities to your iD. ORCID is integrated into many systems used by publishers, funders, institutions, and other research-related services. Learn more at <a href="https://orcid.org/" target="_blank">orcid.org</a>.</small></p>
    <br /><b>Overwrite existing <%= productsTerm.toLowerCase().pluralize() %>?</b><br />
    <input type="radio" id="orcid_overwrite" name="orcid_overwrite" value="yes" style="vertical-align:middle;" /> Yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" id="orcid_overwrite" name="orcid_overwrite" value="" style="vertical-align:middle;" checked="checked" /> No
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="ccvDialog" style="display:none;" title="Upload Canadian CCV">
    <p>You can upload your Canadian CCV (in XML format) using the form below.  Any <%= productsTerm.toLowerCase() %> that can be read into the <%= siteName %> will automatically imported, but will not be visible to anyone else on the <%= siteName %> except you.  The <%= productsTerm.toLowerCase() %> will be placed in a separate "private" queue, and can be released to the rest of the <%= siteName %> by unchecking the "private" checkbox in the <%= productsTerm %> Management table.  This way any unwanted <%= productsTerm.pluralize().toLowerCase() %> will not get added to the <%= siteName %>, and also gives you a chance to make changes to the <%= productsTerm.toLowerCase() %> before releasing it.  A <%= productsTerm.toLowerCase() %> will not get added twice into the <%= siteName %>, so uploading the CCV a second time will generally not result in duplicate entries.  If the "overwrite" option is selected, previously uploaded <%= productsTerm.toLowerCase().pluralize() %> will be updated, and if they were deleted they will be re-created.  Overwriting will typically only add information, and not change existing fields that already have data.</p>
    <p><b>Note:</b> After importing, double check that the publications contain the correct data, especially authors.  If the author is known to the system, they will have a green background when editing, if they don't appear green, then you will need to manually correct this.</p>
    <iframe name="fileUpload" style="display:none;"></iframe>
    <form target="fileUpload" action="<%= wgServer + wgScriptPath %>/index.php?action=api.uploadCCV" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="publications" value="true" />
        <input type="file" name="ccv" accept="application/xml" />
        <br /><br /><b>Overwrite existing <%= productsTerm.toLowerCase().pluralize() %>?</b><br />
    <input type="radio" id="ccv_overwrite" name="ccv_overwrite" value="yes" style="vertical-align:middle;" /> Yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" id="ccv_overwrite" name="ccv_overwrite" value="" style="vertical-align:middle;" checked="checked" /> No
    </form>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="calendarDialog" style="display:none;" title="Upload ICS Calendar">
    <p>You can upload a Calendar (in ICS format) using the form below.  Any events that can be read into the <%= siteName %> will automatically imported, but will not be visible to anyone else on the <%= siteName %> except you.  The <%= productsTerm.toLowerCase() %> will be placed in a separate "private" queue, and can be released to the rest of the <%= siteName %> by unchecking the "private" checkbox in the <%= productsTerm %> Management table.  This way any unwanted events will not get added to the <%= siteName %>, and also gives you a chance to make changes to the event before releasing it.</p>
    <iframe name="icsUpload" style="display:none;"></iframe>
    <form target="icsUpload" action="<%= wgServer + wgScriptPath %>/index.php?action=api.uploadICS" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="publications" value="true" />
        <input type="file" name="ics" accept=".ics" />
    </form>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="bibtexDialog" style="display:none;" title="Import BibTeX">
    <p>You can import a list publications by pasting a list of BibTeX references in the textbox below. The imported publications will appear in the table below, marked as "private", and will not be reflected in the AR or QA CV. To release these private entries, after having reviewed that they were imported correctly (many publishers' bibtex entries are ill-formed) simply uncheck the "private" checkbox in the Output Management table. If the "overwrite" option is selected, previously uploaded publications with the same title and type will be updated.  Overwriting will typically only add information, and not change existing fields that already have data.</p>
    <p><b>Note:</b> After importing, double check that the publications contain the correct data, especially authors.  If the author is known to the system, they will have a green background when editing, if they don't appear green, then you will need to manually correct this.</p>
    <textarea style="resize: none; height:300px; font-size: 11px; font-family: monospace;" name="bibtex"></textarea>
    <br /><br /><b>Overwrite existing <%= productsTerm.toLowerCase().pluralize() %>?</b><br />
    <input type="radio" id="bibtex_overwrite" name="bibtex_overwrite" value="yes" style="vertical-align:middle;" /> Yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" id="bibtex_overwrite" name="bibtex_overwrite" value="" style="vertical-align:middle;" checked="checked" /> No
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<% if(isExtensionEnabled('CrossForumExport')){ %>
    <div id="crossForumExportDialog" style="display:none;" title="Import from other Forum">
        <p>If you have an account on another Forum, you can import BibTeX references from it.  Any <%= productsTerm.toLowerCase() %> that can be read into the Forum will automatically imported, but will not be visible to anyone else on the forum except you.  The <%= productsTerm.toLowerCase() %> will be placed in a separate "private" queue, and can be released to the rest of the Forum by unchecking the "private" checkbox in the <%= productsTerm %> Management table.  This way any unwanted <%= productsTerm.pluralize().toLowerCase() %> will not get added to the forum, and also gives you a chance to make changes to the <%= productsTerm.toLowerCase() %> before releasing it.  If the "overwrite" option is selected, previously uploaded <%= productsTerm.toLowerCase().pluralize() %> will be updated, and if they were deleted they will be re-created.  Overwriting will typically only add information, and not change existing fields that already have data.</p>
        <select>
            <% _.each(crossForumUrls, function(url, name){ %>
                <!--% if(!url.includes(window.location.hostname)){ %-->
                    <option value="<%= url %>"><%= name %></option>
                <!--% } %-->
            <% }) %>
        </select>
        <br /><br /><input type="checkbox" id="bibtex_overwrite" name="overwrite" value="yes" style="vertical-align:middle;" /> <b>Overwrite existing <%= productsTerm.toLowerCase().pluralize() %>?</b>
        <div class="throbber" style="float:right;display:none;"></div>
    </div>
<% } %>
<div id="instructions" style="display:none;">
    <p>
        This page is used to manage all of your <%= productsTerm.pluralize().toLowerCase() %>.  <%= productsTerm.pluralize() %> will show up in this list if one of the following conditions is true.
        <ul>
            <li>You are listed as being one of the authors</li>
            <li>One of your HQP is listed as being one of the authors (only applicable to Supervisors)</li>
            <li>You were the person that created the <%= productsTerm.toLowerCase() %></li>
        </ul>
    </p>
    <p>
        <%= productsTerm.pluralize() %> which are listed as being 'Private' will not show up anywhere else on the <%= siteName %> except for on this page.  To 'release' the <%= productsTerm.toLowerCase() %> to the rest of the <%= siteName %>, uncheck the 'Private' checkbox for a specific <%= productsTerm.toLowerCase() %>, or press the 'Release All Private' button to release all of them.  Once all of your changes are done, make sure to press the 'Save All' button.
    </p>
    <p>
        If, in this table, there exists an output that should not be associated with your record, use <b>"Exclude"</b> to disassociate it from your record.  "Delete" will delete it for all the co-authors.
    </p>
</div>
<p>
    <b>If, in this table, there exists an output that should not be associated with your record, use <b>"Exclude"</b> to disassociate it from your record.  "Delete" will delete it for all the co-authors.</b><br />
    <b>If you make any changes on this page and have other tabs open, the changes will not be reflected on those other tabs until you refresh the page.</b>
</p>
<p>
    <% if(this.category != null){ %>
        <button id="addProductButton">Add <%= this.category %></button>
    <% } else { %>
        <button id="addProductButton">Add <%= productsTerm %></button>
    <% } %>
    <button id="addFromDOIButton">Add From DOI</button>
    <button id="uploadCCVButton">Upload CCV</button>
    <button id="importBibTexButton">Import BibTeX</button>
    <% if(orcidId != ""){ %>
        <button id="importOrcidButton" style="height: 27px;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" />&nbsp;Import ORCID</button>
    <% } %>
    <% if(productStructure.categories['Activity'] != undefined && 
          productStructure.categories['Activity'].types['Meeting'] != undefined){ %>
        <button id="uploadCalendarButton">Import ICS Calendar</button>
    <% } %>
    <% if(isExtensionEnabled('CrossForumExport')){ %>
        <button id="crossForumExport">Import from other Forum</button>
    <% } %>
    <% if(_.contains(allowedRoles, MANAGER)){ %>
        <span style="margin-left:30px;">
        <% if(!this.model.all){ %>
            <a class="button" href="#/all">Show All</a>
        <% } else { %>
            <a class="button" href="#">Show Only Mine</a>
        <% } %>
        </span>
    <% } %>
    <button id="openColVis" style="margin-left:25px; float: right;">Col Vis</button>
    <span style="margin-left:25px; float:right; line-height: 30px;" title="If checked, excluded <%= productsTerm.toLowerCase().pluralize() %> will be hidden.  If any <%= productsTerm.toLowerCase().pluralize() %> have any pending changes they will show up regardless." class="tooltip">
        <input style="vertical-align:middle;" id="hideExcluded" type="checkbox" <% if(this.hideExcluded){ %> checked <% } %> /> Hide Excluded
    </span>
    <span style="float:right; line-height: 30px;" title="If checked, only shows <%= productsTerm.toLowerCase().pluralize() %> published or accepted after <%= (YEAR - 6) %>-04-01" class="tooltip">
        <input style="vertical-align:middle;" id="onlyRecent" type="checkbox" <% if(this.onlyRecent){ %> checked <% } %> /> Only show recent
    </span>
</p>
<%= subview('addProduct') %>
<table id="listTable" frame="box" rules="all" style="display:none;">
    <thead>
        <tr style="border-bottom: 2px solid #C8C8C8;">
            <th width="1%" style="border-left: 2px solid #C8C8C8;">Edit</th>
            <th width="1%">Private&nbsp;<span class="tooltip" title="If a Product is marked as private, it will NOT show up anywhere else on the Forum.">&#9432;</span></th>
            <th width="1%">Exclude&nbsp;<span class="tooltip" title="If a Product is marked as excluded, it will NOT show up in your profile or Annual Report.">&#9432;</span></th>
            <th width="3%" style="min-width: 70px;">Acceptance/<br />Start&nbsp;Date</th>
            <th width="3%" style="min-width: 70px;">Date/<br />End&nbsp;Date</th>
            <th width="12%">Category</th>
            <th width="13%">Type</th>
            <th width="35%">Title</th>
            <th width="35%">Authors</th>
        </tr>
    </thead>
    <tbody id="productRows">
        
    </tbody>
</table>
<div id="colvis" title="Column Visibility" style="display:none;"></div>
