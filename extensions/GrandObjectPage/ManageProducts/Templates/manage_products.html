<div id="editDialog" style="display:none;"></div>
<div id="deletePrivateDialog" style="display:none;" title="Delete <%= productsTerm.pluralize() %>">
    <p>Are you sure you want to delete all "private" <%= productsTerm.pluralize().toLowerCase() %>?</p>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="deleteDialog" style="display:none;" title="Delete <%= productsTerm %>">
    <p>Are you sure you want to delete this <%= productsTerm.toLowerCase() %>?</p>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="doiDialog" style="display:none;" title="Add From DOI">
    <p>You can import a single <%= productsTerm.toLowerCase() %> from a DOI (<a href="http://www.doi.org/" target="_blank">Digital Object Identifier</a>).  Please note that not all <%= productsTerm.pluralize().toLowerCase() %> will be able to be imported from doi.  If the "overwrite" option is selected, previously uploaded <%= productsTerm.toLowerCase().pluralize() %> will be updated, and if they were deleted they will be re-created.</p>
    <b>DOI:</b> <input type="text" width="20" name="doi" placeholder="10.1000/182" />
    <br /><br /><input type="checkbox" id="doi_overwrite" name="overwrite" value="yes" style="vertical-align:middle;" /> <b>Overwrite existing <%= productsTerm.toLowerCase().pluralize() %>?</b>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<% if(orcidId != ""){ %>
    <div id="orcidDialog" style="display:none;" title="Import From ORCID">
        <p>Importing Publications from ORCID will import all works with a valid BibTeX citation.  After clicking the "Import" button, you will be asked to login to your ORCID account and allow the FOS Forum access to your account.  Once this has been done, your works will automatically get imported as Publications in the Forum.  If the "overwrite" option is selected, previously uploaded publications with the same title will be updated.  Overwriting will typically only add information, and not change existing fields that already have data.</p>
        <p><b>Note:</b> Please review carefully the data imported from ORCID, since there is a wide variance in the data quality across ORCID profiles.  After importing, double check that the publications contain the correct data, especially authors.  If the author is known to the system, they will have a green background when editing, if they don't appear green, then you will need to manually correct this.</p><br />
        <p><small>ORCID is an independent non-profit organization that provides a persistent identifier – an ORCID iD – that distinguishes you from other researchers and a mechanism for linking your research outputs and activities to your iD. ORCID is integrated into many systems used by publishers, funders, institutions, and other research-related services. Learn more at <a href="https://orcid.org/" target="_blank">orcid.org</a>.</small></p>
        <br /><b>Overwrite existing <%= productsTerm.toLowerCase().pluralize() %>?</b><br />
        <input type="radio" id="orcid_overwrite" name="orcid_overwrite" value="yes" style="vertical-align:middle;" /> Yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" id="orcid_overwrite" name="orcid_overwrite" value="" style="vertical-align:middle;" checked="checked" /> No
        <div class="throbber" style="float:right;display:none;"></div>
    </div>
<% } %>
<div id="ccvDialog" style="display:none;" title="Upload Canadian CCV">
    <p>You can upload your Canadian CCV (in XML format) using the form below.  Any <%= productsTerm.toLowerCase() %> that can be read into the Forum will automatically imported, but will not be visible to anyone else on the forum except you.  The <%= productsTerm.toLowerCase() %> will be placed in a separate "private" queue, and can be released to the rest of the Forum by unchecking the "private" checkbox in the <%= productsTerm %> Management table.  This way any unwanted <%= productsTerm.pluralize().toLowerCase() %> will not get added to the forum, and also gives you a chance to make changes to the <%= productsTerm.toLowerCase() %> and associate it with projects before releasing it.  <%= productsTerm.an().titleize() %> will not get added twice into the forum, so uploading the CCV a second time will generally not result in duplicate entries.  If the "overwrite" option is selected, previously uploaded <%= productsTerm.toLowerCase().pluralize() %> will be updated, and if they were deleted they will be re-created.</p>
    <iframe name="fileUpload" style="display:none;"></iframe>
    <form target="fileUpload" action="<%= wgServer + wgScriptPath %>/index.php?action=api.uploadCCV" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="publications" value="true" />
        <input type="file" name="ccv" accept="application/xml" />
        <br /><br /><input type="checkbox" id="ccv_overwrite" name="overwrite" value="yes" style="vertical-align:middle;" /> <b>Overwrite existing <%= productsTerm.toLowerCase().pluralize() %>?</b>
    </form>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="calendarDialog" style="display:none;" title="Upload ICS Calendar">
    <p>You can upload a Calendar (in ICS format) using the form below.  Any events that can be read into the Forum will automatically imported, but will not be visible to anyone else on the forum except you.  The <%= productsTerm.toLowerCase() %> will be placed in a separate "private" queue, and can be released to the rest of the Forum by unchecking the "private" checkbox in the <%= productsTerm %> Management table.  This way any unwanted events will not get added to the forum, and also gives you a chance to make changes to the event and associate it with projects before releasing it.</p>
    <iframe name="icsUpload" style="display:none;"></iframe>
    <form target="icsUpload" action="<%= wgServer + wgScriptPath %>/index.php?action=api.uploadICS" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="publications" value="true" />
        <input type="file" name="ics" accept=".ics" />
    </form>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<div id="bibtexDialog" style="display:none;" title="Import BibTeX">
    <p>You can import BibTeX references by pasting all your BibTeX references in the form below.  Any <%= productsTerm.toLowerCase() %> that can be read into the Forum will automatically imported, but will not be visible to anyone else on the forum except you.  The <%= productsTerm.toLowerCase() %> will be placed in a separate "private" queue, and can be released to the rest of the Forum by unchecking the "private" checkbox in the <%= productsTerm %> Management table.  This way any unwanted <%= productsTerm.pluralize().toLowerCase() %> will not get added to the forum, and also gives you a chance to make changes to the <%= productsTerm.toLowerCase() %> and associate it with projects before releasing it.  If the "overwrite" option is selected, previously uploaded <%= productsTerm.toLowerCase().pluralize() %> will be updated, and if they were deleted they will be re-created.</p>
    <textarea style="resize: none; height:300px; font-size: 11px; font-family: monospace;" name="bibtex"></textarea>
    <br /><br /><input type="checkbox" id="bibtex_overwrite" name="overwrite" value="yes" style="vertical-align:middle;" /> <b>Overwrite existing <%= productsTerm.toLowerCase().pluralize() %>?</b>
    <div class="throbber" style="float:right;display:none;"></div>
</div>
<% if(isExtensionEnabled('CrossForumExport')){ %>
    <div id="crossForumExportDialog" style="display:none;" title="Import from other Forum">
        <p>If you have an account on another Forum, you can import BibTeX references from it.  Any <%= productsTerm.toLowerCase() %> that can be read into the Forum will automatically imported, but will not be visible to anyone else on the forum except you.  The <%= productsTerm.toLowerCase() %> will be placed in a separate "private" queue, and can be released to the rest of the Forum by unchecking the "private" checkbox in the <%= productsTerm %> Management table.  This way any unwanted <%= productsTerm.pluralize().toLowerCase() %> will not get added to the forum, and also gives you a chance to make changes to the <%= productsTerm.toLowerCase() %> and associate it with projects before releasing it.  If the "overwrite" option is selected, previously uploaded <%= productsTerm.toLowerCase().pluralize() %> will be updated, and if they were deleted they will be re-created.</p>
        <select>
            <% _.each(crossForumUrls, function(url, name){ %>
                <!--% if(!url.includes(window.location.hostname)){ %-->
                    <option value="<%= url %>"><%= name %></option>
                <!--% } %-->
            <% }) %>
        </select>
        <br /><br /><input type="checkbox" id="bibtex_overwrite" name="overwrite" value="yes" style="vertical-align:middle;" /> <b>Overwrite existing <%= productsTerm.toLowerCase().pluralize() %>?</b>
        <div class="throbber" style="float:right;display:none;"></div>
    </div>
<% } %>
<div id="manageProductsDescription">
    This page is used to manage all of your <%= productsTerm.pluralize().toLowerCase() %>.  <%= productsTerm.pluralize() %> will show up in this list if one of the following conditions is true.
    <ul>
        <li>You are listed as being one of the authors</li>
        <li>One of your HQP is listed as being one of the authors (only applicable to Supervisors)</li>
        <li>The <%= productsTerm.toLowerCase() %> is listed on a project that you lead</li>
        <li>You were the person that created the <%= productsTerm.toLowerCase() %></li>
    </ul>
    <p>If the authors cell of <%= productsTerm.toLowerCase().an() %> is highlighted yellow, then it means that you (or one of your HQP) is not listed as an author of that <%= productsTerm.toLowerCase() %> and that it may need to be manually edited.
    </p>
    <% if(projectsEnabled){ %>
    <p>
        If the projects cell of <%= productsTerm.toLowerCase().an() %> is highlighted yellow, then it means that it is not associated with any projects.
    </p>
    <% } %>
    <p>
        <%= productsTerm.pluralize() %> which are listed as being 'Private' will not show up anywhere else on the forum except for on this page.  To 'release' the <%= productsTerm.toLowerCase() %> to the rest of the Forum, uncheck the 'Private' checkbox for a specific <%= productsTerm.toLowerCase() %>, or press the 'Release All Private' button to release all of them.  Once all of your changes are done, make sure to press the 'Save All' button.
    </p>
    <% if(networkName == "GlycoNet"){ %>
        <p>
            <h4>GlycoNet Digital Object Identifier (doi)</h4>
            The network now has a doi: 10.13039/501100009056<br /><br />
            URL format: <a href="http://dx.doi.org/10.13039/501100009056" target="_blank">http://dx.doi.org/10.13039/501100009056</a><br /><br />
            Please reference this doi when acknowledging GlycoNet as a funding source in your publications, as it will help our management team better track and report on the great work coming out of the network's labs. Accurately capturing the products of the network's research is essential for us to receive continued funding from the NCE program.
        </p>
    <% } %>
</div>
<p class="manageProductButtons">
    <% if(!publicationsFrozen){ %>
        <button id="addProductButton" type="button">Add <%= productsTerm %></button>
        <button id="addFromDOIButton" type="button">Add From DOI</button>
        <!--button id="uploadCCVButton" type="button">Upload CCV</button-->
        <button id="importBibTexButton" type="button">Import BibTeX</button>
        <% if(orcidId != "" && this.categories.length == 0){ %>
            <button id="importOrcidButton" type="button" style="height: 29px; vertical-align: middle;"><img src="https://orcid.org/sites/default/files/images/orcid_16x16.png" />&nbsp;Import ORCID</button>
        <% } %>
        <% if(productStructure.categories['Activity'] != undefined && 
              productStructure.categories['Activity'].types['Meeting'] != undefined){ %>
            <button id="uploadCalendarButton" type="button">Import ICS Calendar</button>
        <% } %>
        <% if(isExtensionEnabled('CrossForumExport')){ %>
            <button id="crossForumExport" type="button">Import from other Forum</button>
        <% } %>
        <span style="margin-left:30px;">
    <% } %>
    <% if(_.contains(allowedRoles, STAFF)){ %>
        <% if(!this.model.all){ %>
            <a class="button" href="#/all">Show All</a>
        <% } else { %>
            <a class="button" href="#">Show Only Mine</a>
        <% } %>
        </span>
    <% } %>
</p>
<%= subview('addProduct') %>
<table id="listTable" frame="box" rules="all" style="display:none;">
    <thead>
        <tr style="border-bottom: 1px solid #C8C8C8; border-top: 1px solid #C8C8C8;">
            <% if(!publicationsFrozen){ %>
                <th class="angledTableHead" ><div class="angledTableBorder"></div><div class="angledTableText">Other</div></th>
                <% _.each(this.projects.models, function(p){ %>
                    <th class="angledTableHead checkboxCell"><div class="angledTableBorder"></div><div class="angledTableText"><%= p.get('name') %></div></th>
                <% }) %>
            <% } %>
            <th width="100%" colspan="8"><%= productsTerm %> Information</th>
        </tr>
        <tr style="border-bottom: 2px solid #C8C8C8;">
            <% if(!publicationsFrozen){ %>
                <th width="40px" class="projectCell"></th>
                <% _.each(this.projects.models, function(p){ %>
                    <th width="40px" class="checkboxCell projectCell"><% if(this.project.get('id') == null){ %><input class="selectAll" data-project="<%= p.id %>" type="checkbox" /><% } %></th>
                <% }.bind(this)) %>
                <th width="1%" style="border-left: 2px solid #C8C8C8;">Edit</th>
                <th width="1%" class="privateCell">Private</th>
            <% } %>
            <th width="3%">Visibility</th>
            <th width="3%" style="min-width: 70px;">Date</th>
            <% if(this.categories.length != 1) { %>
                <th width="12%">Category</th>
            <% } %>
            <th width="13%">Type</th>
            <th width="35%">Title</th>
            <th width="35%">Authors</th>
        </tr>
    </thead>
    <tbody id="productRows">
        
    </tbody>
</table>
