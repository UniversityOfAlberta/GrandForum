<?xml version="1.0" encoding="UTF-8" ?>
<Report extends="../FECpdf">
    <ReportSection id="information">
        <ReportItem id="executive_summary" type="Textarea" blobItem="EXECUTIVE_SUMMARY" rich="true" after="top">
            <![CDATA[
                <h3>Executive Summary</h3>
                {$item}
            ]]>
        </ReportItem>
        <ReportItem id="if_faculty" if="0" />
        <ReportItem id="showReducedTeaching" if="0" />
        
        <If if="1" after="if_faculty">
            <Static>
                <![CDATA[
                    <h3>Variance of Responsibilities</h3>
                ]]>
            </Static>
            <ReportItem id="teaching" type="Text" blobItem="TEACHING" width="2em">
                <![CDATA[
                    <table>
                        <tr><td align='right'><b>Teaching:</b></td><td align='right' style='width:3em;white-space:nowrap;'>{$item}%</td></tr>
                ]]>
            </ReportItem>
            <ReportItem id="research" type="Text" blobItem="RESEARCH" width="2em">
                <![CDATA[
                        <tr><td align='right'><b>Research:</b></td><td align='right' style='width:3em;white-space:nowrap;'>{$item}%</td></tr>
                ]]>
            </ReportItem>
            <ReportItem id="service" type="Text" blobItem="SERVICE" width="2em">
                <![CDATA[
                        <tr><td align='right'><b>Service:</b></td><td align='right' style='width:3em;white-space:nowrap;'>{$item}%</td></tr>
                ]]>
            </ReportItem>
            <ReportItem id="admin" type="Text" blobItem="ADMIN" width="2em">
                <![CDATA[
                        <tr><td align='right'><b>Admin:</b></td><td align='right' style='width:3em;white-space:nowrap;'>{$item}%</td></tr>
                    </table>
                ]]>
            </ReportItem>
        </If>
        
        <ReportItem id="reflection">
            <![CDATA[
                <h3>Additional Information on Teaching</h3>
                {$item}<br />
                <h3>Reflection</h3>
                {getHTML(RP_FEC,FEC_COURSES,FEC_COURSES_REFLECTION2,0,{$user_id},0)}<br />
            ]]>
        </ReportItem>
        
        <!-- Presentations -->
        <ReportItemSet id="if_presentations" if="{or({contains({$my_roles},Faculty)},{>({getUserPublicationCount(CYCLE_START, CYCLE_END, Presentation, true)},0)})}">
            <ReportItem id="presentationsbookmark" type="BookmarkReportItem" title="Presentations">
                <![CDATA[
                    <h2>Presentations ({getUserPublicationCount(CYCLE_START, CYCLE_END, Presentation, true)})</h2>
                ]]>
            </ReportItem>
            <If if="{>({getUserPublicationCount(CYCLE_START, CYCLE_END, Presentation, true)}, 0)}">
                <Static>
                    <![CDATA[
                        <table class='wikitable' frame='box' rules='all' width='100%'>
                            <thead>
                                <tr>
                                    <th style='width:30%;'>Title</th>
                                    <th>Type</th>
                                    <th style='width:1%;'>Invited</th>
                                    <th>Event/Organization</th>
                                    <th>Location</th>
                                    <th style='width:1%;'>Date</th>
                                    <th style='width:1%;'>Length (minutes)</th>
                                </tr>
                            </thead>
                    ]]>
                </Static>
                <ReportItemSet id="presentations" type="PersonProductsReportItemSet" category="Presentation" useProductYear="true" includeHQP="false" start="CYCLE_START" end="CYCLE_END" includeContributors="true">
                    <ReportItem id="row" type="FootnotesReportItem" blobSubItem="{$product_id}" blobSection="FEC_PRODUCTS" >
                        <![CDATA[
                            <tr><td align='left'>
                                    {$presentation_title} <sup>{$item}</sup><br />
                                    Presenters: {$product_authors}<br />
                                    Contributors: {$product_contributors}
                                </td>
                                <td align='center'>{$presentation_type}</td>
                                <td align='center'>{$presentation_invited}</td>
                                <td>{if("{getProductData(event_title)}" != "", {getProductData(event_title)}<br />)}{$presentation_organization}</td>
                                <td align='center'>{$presentation_country}</td>
                                <td align='center' style='white-space:nowrap;'>{$presentation_date}</td>
                                <td align='right' style='white-space:nowrap;'>{$presentation_length}</td>
                            </tr>
                        ]]>
                    </ReportItem>
                </ReportItemSet>
                <Static>
                    <![CDATA[
                        </table>
                    ]]>
                </Static>
                
                <!-- Presentations Footnotes -->
                <Static>
                    <![CDATA[
                        <ul>
                    ]]>
                </Static>
                <ReportItemSet id="presentations" type="PersonProductsReportItemSet" category="Presentation" useProductYear="true" includeHQP="false" start="CYCLE_START" end="CYCLE_END">
                    <ReportItem id="row" type="FootnotesReportItem" blobSubItem="{$product_id}" isTopAnchor="false"  blobSection="FEC_PRODUCTS">
                        <![CDATA[
                            <li style="page-break-inside: avoid;">
                                {$item}
                            </li>
                        ]]>
                    </ReportItem>
                </ReportItemSet>
                <Static>
                    <![CDATA[
                        </ul>
                    ]]>
                </Static>
            </If>
        </ReportItemSet>
        
        <!-- Grants -->
        <ReportItemSet id="grants">
            <ReportItem id="grantsbookmark" type="BookmarkReportItem" title="Research Grants and Contracts">
                <![CDATA[
                    <h2>Research Grants and Contracts ({$user_grant_count})</h2>
                ]]>
            </ReportItem>
            <If if="{>({$user_grant_count}, 0)}">
                <Static>
                    <![CDATA[
                        <h3>New Grants</h3>
                        <table class='wikitable' frame='box' rules='all' width='100%'>
                            <thead>
                                <tr>
                                    <th style='width:30%;'>Title</th>
                                    <th style='width:20%;'>Sponsor</th>
                                    <th style='width:5%;'>Starts</th>
                                    <th style='width:5%;'>Ends</th>
                                    <th style='width:5%;'>$Total</th>
                                    <th style='width:5%;'>Average<br />Amount/Year</th>
                                    <th style='width:5%; white-space:nowrap;'>P.I.<br />(y/n)</th>
                                    <th style='width: 25%;'>Joint With</th>
                                </tr>
                            </thead>
                            <tbody>
                    ]]>
                </Static>
                <ReportItemSet id="grants" type="PersonNewGrantsReportItemSet" start="CYCLE_START" end="CYCLE_END">
                    <ReportItem id="row" type="FootnotesReportItem" blobSubItem="{$grant_id}" blobSection="FEC_GRANTS">
                        <![CDATA[
                            <tr>
                                <td align='left'>{$grant_project_id} <sup>{$item}</sup><br />
                                    {$grant_scientific_title}
                                </td>
                                <td align='left'>{$grant_sponsor}</td>
                                <td align='center' style='white-space:nowrap;'>{$grant_start_date}</td>
                                <td align='center' style='white-space:nowrap;'>{$grant_end_date}</td>
                                <td align='right'>${$grant_total}</td>
                                <td align='right'>${$grant_average}</td>
                                <td align='center'>{$grant_is_pi}</td>
                                <td>{$grant_people}</td>
                            </tr>
                        ]]>
                    </ReportItem>
                </ReportItemSet>
                <Static>
                    <![CDATA[
                        </tbody></table><br />
                    ]]>
                </Static>
                
                <!-- Grants Footnotes -->
                <Static>
                    <![CDATA[
                        <ul>
                    ]]>
                </Static>
                <ReportItemSet id="grants" type="PersonNewGrantsReportItemSet" start="CYCLE_START" end="CYCLE_END">
                    <ReportItem id="row" type="FootnotesReportItem" blobSubItem="{$grant_id}" isTopAnchor="false" blobSection="FEC_GRANTS">
                        <![CDATA[
                            <li style="page-break-inside: avoid;">
                                {$item}
                            </li>
                        ]]>
                    </ReportItem>
                </ReportItemSet>
                <Static>
                    <![CDATA[
                        </ul>
                    ]]>
                </Static>
                
                <Static>
                    <![CDATA[
                        <h3>Continuing Grants</h3>
                        <table class='wikitable' frame='box' rules='all' width='100%'>
                            <thead>
                                <tr>
                                    <th style='width:30%;'>Title</th>
                                    <th style='width:20%;'>Sponsor</th>
                                    <th style='width:5%;'>Starts</th>
                                    <th style='width:5%;'>Ends</th>
                                    <th style='width:5%;'>$Total</th>
                                    <th style='width:5%;'>Average<br />Amount/Year</th>
                                    <th style='width:5%; white-space:nowrap;'>P.I.<br />(y/n)</th>
                                    <th style='width: 25%;'>Joint With</th>
                                </tr>
                            </thead>
                            <tbody>
                    ]]>
                </Static>
                <ReportItemSet id="grants" type="PersonContinuingGrantsReportItemSet" start="CYCLE_START" end="CYCLE_END">
                    <ReportItem id="row" type="FootnotesReportItem" blobSubItem="{$grant_id}" blobSection="FEC_GRANTS">
                        <![CDATA[
                            <tr>
                                <td align='left'>{$grant_project_id} <sup>{$item}</sup><br />
                                    {$grant_scientific_title}
                                </td>
                                <td align='left'>{$grant_sponsor}</td>
                                <td align='center' style='white-space:nowrap;'>{$grant_start_date}</td>
                                <td align='center' style='white-space:nowrap;'>{$grant_end_date}</td>
                                <td align='right'>${$grant_total}</td>
                                <td align='right'>${$grant_average}</td>
                                <td align='center'>{$grant_is_pi}</td>
                                <td>{$grant_people}</td>
                            </tr>
                        ]]>
                    </ReportItem>
                </ReportItemSet>
                <Static>
                    <![CDATA[
                        </tbody></table><br />
                    ]]>
                </Static>
                
                <!-- Grants Footnotes -->
                <Static>
                    <![CDATA[
                        <ul>
                    ]]>
                </Static>
                <ReportItemSet id="grants" type="PersonContinuingGrantsReportItemSet" start="CYCLE_START" end="CYCLE_END">
                    <ReportItem id="row" type="FootnotesReportItem" blobSubItem="{$grant_id}" isTopAnchor="false" blobSection="FEC_GRANTS">
                        <![CDATA[
                            <li style="page-break-inside: avoid;">
                                {$item}
                            </li>
                        ]]>
                    </ReportItem>
                </ReportItemSet>
                <Static>
                    <![CDATA[
                        </ul>
                    ]]>
                </Static>
            </If>
        </ReportItemSet>
        
        <If id="professional" if="{!contains({$my_roles},Faculty)}" after="services">
            <ReportItem id="professional" type="Textarea" blobSection="FEC_PROFESSIONAL" blobItem="FEC_PROFESSIONAL" blobType="BLOB_TEXT" rich="true" encrypt="true">
                <![CDATA[
                    <h2>Professional Development</h2>
                    {$item}
                ]]>
            </ReportItem>
        </If>
        
    </ReportSection>
    <ReportSection id="spots" pagebreak="true" />
    <ReportSection id="documents" title="APPENDIX B: Attachments" blobSection="FEC_ADDITIONAL_INFO" type="EditableReportSection" pagebreak="false" hLevel="2">
        <Static>
            <![CDATA[
                <ul>
            ]]>
        </Static>
        <For from="1" to="4">
            <Static>
                <![CDATA[
                    {set(md5, {getBlobMD5(RP_FEC,FEC_ADDITIONAL_INFO,FILE{getExtra()},0,{$user_id},0)})}
                    {set(label, {getText(RP_FEC,FEC_ADDITIONAL_INFO,FILE{getExtra()}_LABEL,0,{$user_id},0)})}
                ]]>
            </Static>
            <Static>
                <![CDATA[
                    {if("{get(md5)}" != "", 
                        <li><a class='externalLink' href='{$wgServer}{$wgScriptPath}/index.php?action=downloadBlob&id={get(md5)}'>Document {getExtra()}: {get(label)}</a></li>
                    )}
                ]]>
            </Static>
            <ReportItem id="file{getExtra()}" type="UploadPDFReportItem" blobItem="FILE{getExtra()}" blobType="BLOB_RAW" />
        </For>
        <Static>
            <![CDATA[
                </ul>
            ]]>
        </Static>
    </ReportSection>
</Report>
