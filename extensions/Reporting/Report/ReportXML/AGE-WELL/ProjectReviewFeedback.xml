<?xml version="1.0" encoding="UTF-8" ?>
<Report name="Project Review Feedback" reportType="RP_PROJ_REVIEW" ajax="true">
    <Permissions>
        <Role start="REPORTING_CYCLE_START" end="REPORTING_CYCLE_END" role="Staff">
            <SectionPermission id="feedback" permissions="rw" />
        </Role>
        <Role start="REPORTING_CYCLE_START" end="REPORTING_CYCLE_END" role="Manager">
            <SectionPermission id="feedback" permissions="rw" />
        </Role>
        <Role start="REPORTING_CYCLE_START" end="REPORTING_CYCLE_END" role="RMC">
            <SectionPermission id="feedback" permissions="rw" />
        </Role>
        <Role start="REPORTING_CYCLE_START" end="REPORTING_CYCLE_END" role="SD">
            <SectionPermission id="feedback" permissions="rw" />
        </Role>
    </Permissions>
    <ReportSection id="feedback" tooltip="Project Feedback" name="Project Feedback" blobSection="PROJ_REVIEW_FEEDBACK" type="EditableReportSection">
        <ReportItemSet id="comments" type="AllProjectsReportItemSet" subType="Project">
            <ReportItemSet id="header" type="ToggleHeaderReportItemSet" title="{$project_name}">
                <ReportItem id="table_head" type="StaticReportItem">
                    <![CDATA[
                        <table class='wikitable' style='width:100%;'>
                            <tr>
                                <th width="30%">Reviewer Comment</th>
                                <th width="30%">Project Leader Comments</th>
                                <th width="40%">Additional Reviewer Feedback</th>
                            </tr>
                    ]]>
                </ReportItem>
                <ReportItemSet id="reviewers" type="ProjectReviewersReportItemSet">
                    <ReportItemSet id="comments" type="ArrayReportItemSet" array="{getArray(RP_PROJ_REVIEW,PROJ_REVIEW_COMMENTS,PROJ_REVIEW_COMM,0,{$user_id},{$project_id})}" index="comments">
                        <ReportItem id="comments" type="StaticReportItem">
                            <![CDATA[
                                <tr>
                                    <td valign='top'>
                                        <p>{getExtra(comment)}</p>
                                    </td>
                            ]]>
                        </ReportItem>
                        <ReportItem id="comment" type="StaticReportItem">
                            <![CDATA[
                                <td valign='top'>
                                    {getText(RP_PROJ_FEEDBACK,PROJ_FEEDBACK_COMMENTS,PROJ_FEEDBACK_COMM,{$user_id}0{$extraIndex},0,{$project_id}))}
                                </td>
                            ]]>
                        </ReportItem>
                        <ReportItem id="feedback" type="TextareaReportItem" height="100px" blobItem="PROJ_FEEDBACK_COMM" blobSubItem="{$user_id}0{$extraIndex}">
                            <![CDATA[
                                    <td valign='top'>
                                        {$item}
                                    </td>
                                </tr>
                            ]]>
                        </ReportItem>
                    </ReportItemSet>
                </ReportItemSet>
                <ReportItem id="table_foot" type="StaticReportItem">
                    <![CDATA[
                        </table>
                    ]]>
                </ReportItem>
            </ReportItemSet>
        </ReportItemSet>
    </ReportSection>
</Report>
